<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>States of Matter â€” Responsive</title>
<script src="https://unpkg.com/animejs@3.2.1/lib/anime.min.js"></script>
<style>
  :root {
    --bg: #0e1726;
    --accent1: #4cc9f0;
    --accent2: #4895ef;
    --card: rgba(255, 255, 255, 0.05);
  }
  body {
    margin: 0;
    min-height: 100vh;
    background: var(--bg);
    color: #fff;
    font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 4vw 3vw;
    gap: 2vw;
  }

  /* MAIN HEADING */
  h1#mainHeading {
    margin: 0;
    height: clamp(36px, 6vw, 60px);
    overflow: hidden;
    width: 100%;
    max-width: 900px;
    text-align: center;
    font-size: clamp(20px, 4.5vw, 42px);
    font-weight: 700;
  }
  .heading-wrapper {
    position: relative;
    height: 100%;
  }
  .heading-item {
    position: absolute;
    left: 0; right: 0;
    top: 0;
    width: 100%;
    text-align: center;
    pointer-events: none;
  }

  /* SMALL STATE LABEL */
  .state-label {
    height: clamp(24px, 4vw, 38px);
    overflow: hidden;
    width: 100%;
    max-width: 900px;
    text-align: center;
    font-size: clamp(14px, 2.5vw, 20px);
    font-weight: 600;
    color: #dbeafe;
  }
  .label-wrapper { position: relative; height: 100%; }
  .label-item { position: absolute; left: 0; right: 0; top: 0; width: 100%; }

  /* PARTICLE CONTAINER */
  .container {
    width: min(90vw, 500px);
    height: min(60vh, 380px);
    border-radius: 12px;
    border: 3px solid rgba(255, 255, 255, 0.12);
    background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
  }
  .particle {
    width: clamp(10px, 2vw, 14px);
    height: clamp(10px, 2vw, 14px);
    border-radius: 50%;
    position: absolute;
    background: radial-gradient(circle at 30% 30%, #fff, var(--accent1));
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.45);
    will-change: transform, left, top;
  }

  /* BUTTON */
  .controls { margin-top: 1vw; display: flex; gap: 1rem; flex-wrap: wrap; justify-content: center; }
  button#changeStateBtn {
    background: linear-gradient(90deg, var(--accent1), var(--accent2));
    border: none;
    color: #07203a;
    font-weight: 700;
    padding: 0.6rem 1rem;
    border-radius: 8px;
    cursor: pointer;
    font-size: clamp(14px, 2.5vw, 18px);
    box-shadow: 0 6px 18px rgba(74, 123, 180, 0.12);
  }
  button#changeStateBtn:hover { transform: translateY(-2px); transition: transform .18s ease; }

  /* DESCRIPTION */
  .description {
    width: 100%;
    max-width: 900px;
    background: var(--card);
    border-radius: 10px;
    padding: 1rem;
    min-height: 120px;
    box-sizing: border-box;
    font-size: clamp(14px, 2.2vw, 18px);
  }
  .desc-wrapper { position: relative; min-height: 88px; overflow: hidden; }
  .desc-item { position: absolute; left: 0; right: 0; top: 0; width: 100%; }
  ul { margin: 0; padding-left: 1.2rem; color: #e6f6ff; }
  li { margin-bottom: 0.5rem; line-height: 1.45; }

  /* SMALL DEVICES */
  @media (max-width: 480px) {
    body { padding: 5vw 4vw; gap: 3vw; }
    .controls { flex-direction: column; align-items: center; }
    .description { padding: 0.8rem; }
  }
</style>
</head>
<body>
<h1 id="mainHeading">
  <div class="heading-wrapper" id="headingWrapper">
    <div class="heading-item">Solid State of Matter</div>
  </div>
</h1>

<div class="state-label">
  <div class="label-wrapper" id="labelWrapper">
    <div class="label-item">Solid</div>
  </div>
</div>

<div class="container" id="container"></div>

<div class="controls">
  <button id="changeStateBtn">Change to Liquid</button>
</div>

<div class="description">
  <div class="desc-wrapper" id="descWrapper">
    <div class="desc-item">
      <ul>
        <li>Particles are closely packed and fixed in position.</li>
        <li>Definite shape and definite volume.</li>
        <li>Particles vibrate but do not move freely.</li>
        <li>Strong intermolecular forces.</li>
      </ul>
    </div>
  </div>
</div>

<script>
const STATES = ["Solid", "Liquid", "Gas"];
const STATE_INFO = {
  Solid: [
    "Particles are closely packed and fixed in position.",
    "Definite shape and definite volume.",
    "Particles vibrate but do not move freely.",
    "Strong intermolecular forces."
  ],
  Liquid: [
    "Particles are close but can slide past each other.",
    "No definite shape, but definite volume.",
    "Flows to take the shape of its container.",
    "Moderate intermolecular forces."
  ],
  Gas: [
    "Particles are far apart and move freely.",
    "No definite shape or volume.",
    "Fills the entire container.",
    "Very weak intermolecular forces."
  ]
};

let currentStateIndex = 0;
const numParticles = 36;
const particles = [];

const headingWrapper = document.getElementById('headingWrapper');
const labelWrapper = document.getElementById('labelWrapper');
const descWrapper = document.getElementById('descWrapper');
const container = document.getElementById('container');
const btn = document.getElementById('changeStateBtn');

function swapTextWithSlide(wrapperEl, newHTML, opts = {}) {
  const outDur = opts.outDur ?? 300;
  const inDur = opts.inDur ?? 300;
  const easing = opts.easing ?? 'easeInOutQuad';

  const newItem = document.createElement('div');
  newItem.className =
    wrapperEl === descWrapper
      ? 'desc-item'
      : wrapperEl === headingWrapper
      ? 'heading-item'
      : 'label-item';
  newItem.style.transform = 'translateY(30px)';
  newItem.style.opacity = '0';
  newItem.innerHTML = newHTML;
  wrapperEl.appendChild(newItem);

  const oldItems = Array.from(wrapperEl.children).filter(c => c !== newItem);

  const tl = anime.timeline();
  if (oldItems.length) {
    tl.add({
      targets: oldItems,
      translateY: -30,
      opacity: 0,
      duration: outDur,
      easing: easing,
      delay: anime.stagger(40)
    });
  }
  tl.add({
    targets: newItem,
    translateY: [30, 0],
    opacity: [0, 1],
    duration: inDur,
    easing: easing,
    offset: `-=${Math.min(outDur, inDur)}`
  });
  tl.finished.then(() => oldItems.forEach(n => n.remove()));
}

function createParticles() {
  container.innerHTML = '';
  particles.length = 0;
  for (let i = 0; i < numParticles; i++) {
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.left = '50%';
    p.style.top = '50%';
    container.appendChild(p);
    particles.push(p);
  }
}

function stopParticleAnimations() {
  anime.remove(particles);
}

function arrangeSolid() {
  const W = container.clientWidth, H = container.clientHeight;
  const cols = 6;
  const rows = Math.ceil(numParticles / cols);
  const spacingX = W / (cols + 1);
  const spacingY = H / (rows + 1);
  particles.forEach((p, i) => {
    const col = i % cols;
    const row = Math.floor(i / cols);
    const targetX = spacingX * (col + 1);
    const targetY = spacingY * (row + 1);
    anime({
      targets: p,
      left: `${targetX}px`,
      top: `${targetY}px`,
      translateX: 0,
      translateY: 0,
      duration: 700,
      easing: 'easeInOutQuad',
      complete: () => {
        anime({
          targets: p,
          translateX: [{ value: -2 }, { value: 2 }, { value: 0 }],
          translateY: [{ value: -2 }, { value: 2 }, { value: 0 }],
          duration: 300,
          loop: true,
          easing: 'easeInOutSine'
        });
      }
    });
  });
}

function floatAround(el, range = 24, dur = 2000) {
  anime({
    targets: el,
    translateX: (Math.random() - 0.5) * range,
    translateY: (Math.random() - 0.5) * range,
    duration: dur + Math.random() * 800,
    direction: 'alternate',
    easing: 'easeInOutSine',
    loop: true
  });
}

function arrangeLiquid() {
  const W = container.clientWidth, H = container.clientHeight;
  particles.forEach(p => {
    anime({
      targets: p,
      left: `${Math.random() * (W - 14)}px`,
      top: `${Math.random() * (H - 14)}px`,
      duration: 700 + Math.random() * 200,
      easing: 'easeInOutQuad',
      complete: () => floatAround(p, 28, 1800 + Math.random() * 1200)
    });
  });
}

function moveRandomly(el, W, H) {
  anime({
    targets: el,
    left: `${Math.random() * (W - 14)}px`,
    top: `${Math.random() * (H - 14)}px`,
    duration: 1200 + Math.random() * 2200,
    easing: 'linear',
    complete: () => moveRandomly(el, W, H)
  });
}

function arrangeGas() {
  const W = container.clientWidth, H = container.clientHeight;
  particles.forEach(p => {
    anime({
      targets: p,
      left: `${Math.random() * (W - 14)}px`,
      top: `${Math.random() * (H - 14)}px`,
      duration: 400,
      easing: 'easeOutQuad',
      complete: () => moveRandomly(p, W, H)
    });
  });
}

function setState(stateName) {
  stopParticleAnimations();
  swapTextWithSlide(headingWrapper, `${stateName} State of Matter`);
  swapTextWithSlide(labelWrapper, stateName);
  const descHtml = `<ul>${STATE_INFO[stateName].map(s => `<li>${s}</li>`).join('')}</ul>`;
  swapTextWithSlide(descWrapper, descHtml);

  setTimeout(() => {
    if (stateName === 'Solid') arrangeSolid();
    else if (stateName === 'Liquid') arrangeLiquid();
    else arrangeGas();
  }, 120);
}

btn.addEventListener('click', () => {
  currentStateIndex = (currentStateIndex + 1) % STATES.length;
  const next = STATES[currentStateIndex];
  setState(next);
  btn.textContent = `Change to ${STATES[(currentStateIndex + 1) % STATES.length]}`;
});

createParticles();
setState('Solid');
btn.textContent = `Change to ${STATES[1]}`;

window.addEventListener('resize', () => {
  const state = STATES[currentStateIndex];
  setState(state);
});
</script>
</body>
</html>
